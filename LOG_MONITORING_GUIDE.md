# 日志监控指南

## 📊 日志系统概述

小红书自动发布助手包含完整的日志监控系统，可以帮助你追踪发布过程中的每一步。

## 🎯 日志级别

### 📘 INFO (蓝色)
- 一般信息和进度更新
- 例如: "🚀 开始从飞书读取数据..."
- "📤 [1/5] 正在发布: 标题"

### ✅ SUCCESS (绿色)
- 操作成功完成
- 例如: "✅ Token 获取成功"
- "✅ 发布成功: 标题"

### ⚠️ WARN (橙色)
- 警告信息，但不影响继续执行
- 例如: "⚠️ 没有找到待发布的内容"
- "⏸️ 发布已暂停"

### ❌ ERROR (红色)
- 错误信息，可能导致发布失败
- 例如: "❌ 未配置飞书 API 凭证"
- "❌ 发布失败: 标题 - 找不到发布按钮"

## 📍 查看日志的方式

### 方式 1: 在扩展弹窗中查看

1. 点击 Chrome 工具栏中的扩展图标
2. 选择"日志"标签
3. 实时查看发布日志
4. 使用搜索框过滤日志

### 方式 2: 在浏览器控制台查看

1. 打开 Chrome 开发者工具 (F12)
2. 选择"Console"标签
3. 查看彩色的日志输出
4. 日志会显示时间、级别和详细信息

**查看后台日志**:
1. 打开 `chrome://extensions/`
2. 找到"小红书自动发布助手"
3. 点击"Service Worker"
4. 在打开的开发者工具中查看 Console

## 📋 常见日志示例

### 成功发布流程

```
[10:30:45] INFO: 🚀 开始从飞书读取数据...
[10:30:46] INFO: 🔐 正在获取飞书 token...
[10:30:47] SUCCESS: ✅ Token 获取成功
[10:30:47] INFO: 📚 正在读取表格列表...
[10:30:48] SUCCESS: ✅ 找到表格: 发布计划
[10:30:48] INFO: 📖 正在读取表格记录...
[10:30:49] INFO: 📊 总共读取 5 条记录
[10:30:49] INFO: 🔍 筛选出 3 条待发布内容 (状态为 "pending" 或 "待发布")
[10:30:49] SUCCESS: ✅ 读取到 3 条待发布内容
[10:30:49] INFO: 📋 内容列表: "标题1", "标题2", "标题3"
[10:30:50] INFO: 📤 [1/3] 正在发布: "标题1" (耗时: 1s)
[10:30:55] SUCCESS: ✅ 发布成功: "标题1" (进度: 1/3)
[10:30:55] INFO: ⏳ 等待 30 秒后发布下一条...
[10:31:25] INFO: 📤 [2/3] 正在发布: "标题2" (耗时: 36s)
[10:31:30] SUCCESS: ✅ 发布成功: "标题2" (进度: 2/3)
[10:31:30] INFO: ⏳ 等待 30 秒后发布下一条...
[10:32:00] INFO: 📤 [3/3] 正在发布: "标题3" (耗时: 66s)
[10:32:05] SUCCESS: ✅ 发布成功: "标题3" (进度: 3/3)
[10:32:05] SUCCESS: 🎉 发布完成！总耗时: 1m35s
[10:32:05] INFO: 📊 最终统计: 成功=3, 失败=0, 总计=3
```

### 配置错误

```
[10:30:45] ERROR: ❌ 未配置飞书 API 凭证，请先在配置标签中填写
```

### 没有待发布内容

```
[10:30:49] INFO: 🔍 筛选出 0 条待发布内容 (状态为 "pending" 或 "待发布")
[10:30:49] WARN: ⚠️ 没有找到待发布的内容（状态应为 "pending" 或 "待发布"）
```

### 发布失败

```
[10:30:50] INFO: 📤 [1/3] 正在发布: "标题1" (耗时: 1s)
[10:30:55] ERROR: ❌ 发布失败: "标题1" - 找不到发布按钮
```

### 暂停和恢复

```
[10:30:55] WARN: ⏸️ 发布已暂停
[10:31:30] INFO: ▶️ 发布已恢复 (暂停了 35s)
```

### 停止发布

```
[10:30:55] WARN: ⏹️ 发布已停止
```

## 🔍 日志搜索

在弹窗的"日志"标签中，使用搜索框快速查找：

- 搜索"错误": 查看所有错误
- 搜索"成功": 查看所有成功的发布
- 搜索"标题名": 查看特定内容的发布日志
- 搜索"token": 查看认证相关的日志

## 📊 日志统计信息

每次更新时，日志会显示实时统计：

```
📊 统计: 待发布=2, 已发布=1, 失败=0
```

这表示：
- **待发布**: 还有 2 条内容等待发布
- **已发布**: 已成功发布 1 条
- **失败**: 有 0 条发布失败

## 🐛 故障排除

### 问题: 看不到任何日志

**解决**:
1. 确保已点击"开始发布"按钮
2. 检查是否有配置错误（会显示红色错误）
3. 尝试刷新弹窗

### 问题: 日志显示"找不到发布按钮"

**解决**:
1. 小红书 UI 可能已更新
2. 手动打开小红书创建页面检查选择器
3. 更新 `content.js` 中的选择器

### 问题: 日志显示"Token 获取失败"

**解决**:
1. 检查 App ID 和 App Secret 是否正确
2. 检查网络连接
3. 确保飞书应用有必要的权限

### 问题: 日志显示"没有找到待发布的内容"

**解决**:
1. 检查飞书表格中是否有记录
2. 确保记录的"状态"字段为 "pending" 或 "待发布"
3. 检查表格字段名是否正确

## 💾 日志保存

- 最多保存 **200 条** 日志
- 当超过 200 条时，最旧的日志会被删除
- 可以点击"清空日志"按钮手动清空所有日志

## 📈 性能监控

日志会显示：
- **耗时**: 从开始发布到当前的总耗时
- **进度**: 已发布/总数
- **间隔**: 发布间隔时间

例如:
```
📤 [2/5] 正在发布: "标题" (耗时: 1m30s)
```

这表示已经发布了 1 分 30 秒，正在发布第 2 条（共 5 条）。

## 🎯 最佳实践

1. **定期检查日志**: 发布过程中定期查看日志，及时发现问题
2. **记录错误**: 如果出现错误，记下完整的错误信息便于排查
3. **保存日志**: 重要的发布可以截图保存日志
4. **使用搜索**: 使用搜索功能快速定位问题
5. **查看控制台**: 对于复杂问题，查看浏览器控制台的详细日志

## 📞 获取帮助

如果日志显示错误，请：

1. 记下完整的错误信息
2. 查看 `TROUBLESHOOTING.md` 中的相应解决方案
3. 检查 `API_REFERENCE.md` 了解 API 细节
4. 查看浏览器控制台的详细错误堆栈

---

**提示**: 日志系统会自动记录所有操作，你可以随时查看发布历史和诊断问题！
